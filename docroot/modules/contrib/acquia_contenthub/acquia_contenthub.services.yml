services:

  acquia_contenthub_common_actions:
    class: Drupal\acquia_contenthub\ContentHubCommonActions
    arguments: ['@event_dispatcher', '@entity.cdf.serializer', '@entity.dependency.calculator', '@acquia_contenthub.client.factory', '@logger.factory', '@config.factory']

  acquia_contenthub.stub.tracker:
    class: Drupal\acquia_contenthub\StubTracker
    arguments: ['@event_dispatcher']
    tags:
      - { name: persist }

  access_check.acquia_contenthub.contenthub_access:
    class: Drupal\acquia_contenthub\Access\ContentHubAccess
    arguments: ['@logger.factory', '@acquia_contenthub.client.factory']
    tags:
      - { name: access_check, applies_to: _contenthub_access }

  access_check.acquia_contenthub.contenthub_ui_access:
    class: Drupal\acquia_contenthub\Access\ContentHubUiAccess
    arguments: ['@logger.factory', '@acquia_contenthub.client.factory']
    tags:
      - { name: access_check, applies_to: _contenthub_ui_access }

  entity.cdf.serializer:
    class: Drupal\acquia_contenthub\EntityCdfSerializer
    arguments: ['@event_dispatcher', '@config.factory', '@entity.dependency.calculator', '@module_installer', '@acquia_contenthub.stub.tracker', '@extension.list.module']

  acquia_contenthub.client.factory:
    class: Drupal\acquia_contenthub\Client\ClientFactory
    arguments: ['@event_dispatcher', '@acquia_contenthub.logger_channel', '@extension.list.module', '@config.factory', '@acquia_contenthub.platform_checker']

  acquia_contenthub.file_scheme_handler.manager:
    class: Drupal\acquia_contenthub\Plugin\FileSchemeHandler\FileSchemeHandlerManager
    parent: default_plugin_manager
    tags:
      - { name: plugin_manager_cache_clear }

  acquia_contenthub.load_local_entity.by_uuid:
    class: Drupal\acquia_contenthub\EventSubscriber\LoadLocalEntity\LoadEntityByUuid
    tags:
      - { name: event_subscriber }

  acquia_contenthub.load_local_entity.by_username_or_mail:
    class: Drupal\acquia_contenthub\EventSubscriber\LoadLocalEntity\LoadUserByNameOrMail
    tags:
      - { name: event_subscriber }

  content_entity.cdf.handler:
    class: Drupal\acquia_contenthub\EventSubscriber\CreateCdfObject\ContentEntityCreateCdfHandler
    arguments: ['@event_dispatcher', '@acquia_contenthub.client.factory']
    tags:
      - { name: event_subscriber }

  content_entity.cdf.parser_handler:
    class: Drupal\acquia_contenthub\EventSubscriber\ParseCdf\ContentEntityParseCdfHandler
    arguments: ['@event_dispatcher']
    tags:
      - { name: event_subscriber }

  config_entity.cdf.handler:
    class: Drupal\acquia_contenthub\EventSubscriber\Cdf\ConfigEntityHandler
    arguments: ['@entity.dependency.calculator', '@acquia_contenthub.client.factory', '@language_manager']
    tags:
      - { name: event_subscriber }

  config_entity.data.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeConfig\DefaultConfigSerializer
    arguments: ['@config.factory', '@language_manager']
    tags:
      - { name: event_subscriber }

  entity_view_display.data.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeConfig\EntityViewDisplaySerializer
    arguments: ['@entity_type.manager']
    tags:
      - { name: event_subscriber }

  config_entity.layout_builder.cdf.handler:
    class: Drupal\acquia_contenthub\EventSubscriber\Cdf\ConfigEntityLayoutBuilderHandler
    arguments: ['@entity_type.manager']
    tags:
      - { name: event_subscriber }

  configurable_language.cdf.handler:
    class: Drupal\acquia_contenthub\EventSubscriber\Cdf\ConfigurableLanguageHandler
    tags:
    - { name: event_subscriber }

  existing_user_entity.cdf.handler:
    class: Drupal\acquia_contenthub\EventSubscriber\Cdf\ExistingUser
    tags:
      - { name: event_subscriber }

  file_entity.cdf.handler:
    class: Drupal\acquia_contenthub\EventSubscriber\Cdf\FileEntityHandler
    arguments: ['@acquia_contenthub.file_scheme_handler.manager', '@logger.factory']
    tags:
      - { name: event_subscriber }

  user_data.export:
    class: Drupal\acquia_contenthub\EventSubscriber\Cdf\ExportUserData
    arguments: ['@database', '@user.data']
    tags:
      - { name: event_subscriber }

  pathauto_disable.pre_entity_save:
    class: Drupal\acquia_contenthub\EventSubscriber\PreEntitySave\DisablePathauto
    arguments: ['@module_handler']
    tags:
      - { name: event_subscriber }

  create_new_revision.pre_entity_save:
    class: Drupal\acquia_contenthub\EventSubscriber\PreEntitySave\CreateNewRevision
    arguments: ['@acquia_contenthub.stub.tracker']
    tags:
      - { name: event_subscriber }

  redirect_source.pre_entity_save:
    class: Drupal\acquia_contenthub\EventSubscriber\PreEntitySave\RedirectSource
    tags:
      - { name: event_subscriber }

  user_data.import:
    class: Drupal\acquia_contenthub\EventSubscriber\EntityImport\ImportUserData
    arguments: ['@user.data']
    tags:
      - { name: event_subscriber }

  entity_type_bundle.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\EntityTypeBundleCdfAttribute
    tags:
      - { name: event_subscriber }

  entity.tags.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\EntityTagsCdfAttribute
    tags:
      - { name: event_subscriber }

  entity.channels.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\EntityChannelsAttribute
    tags:
      - { name: event_subscriber }

  entity.languages.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\EntityLanguagesAttribute
    tags:
      - { name: event_subscriber }

  version.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\CdfVersionAttribute
    tags:
      - { name: event_subscriber }

  core_version.client_cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\CoreVersionAttribute
    arguments: ['@acquia_contenthub.project_version_client']
    tags:
      - { name: event_subscriber }

  ach_version.client_cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\AchVersionAttribute
    arguments: ['@acquia_contenthub.project_version_client', '@module_handler']
    tags:
      - { name: event_subscriber }

  entity.hash.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\HashCdfAttribute
    tags:
      - { name: event_subscriber }

  entity.url.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\EntityUrlCdfAttribute
    tags:
      - { name: event_subscriber }

  pub.sub_status.checker:
    class: Drupal\acquia_contenthub\PubSubModuleStatusChecker
    arguments: ['@module_handler']

  entity.publisher.subscriber.status.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\PublisherSubscriberStatusCdfAttribute
    arguments: ['@pub.sub_status.checker']
    tags:
      - { name: event_subscriber }

  entity.term_parent.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\TermParentCdfAttribute
    arguments: ['@entity_type.manager']
    tags:
      - { name: event_subscriber }

  entity.user_data.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\UserDataCdfAttribute
    tags:
      - { name: event_subscriber }

  base_url.cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\BaseUrlAttribute
    tags:
      - { name: event_subscriber }

  entity_id.field.cdf.exclude:
    class: Drupal\acquia_contenthub\EventSubscriber\ExcludeContentField\RemoveIdField
    tags:
      - { name: event_subscriber }

  entity_revision.field.cdf.exclude:
    class: Drupal\acquia_contenthub\EventSubscriber\ExcludeContentField\RemoveRevisionField
    tags:
      - { name: event_subscriber }

  paragraph_parent_id.field.cdf.exclude:
    class: Drupal\acquia_contenthub\EventSubscriber\ExcludeContentField\RemoveParagraphParentId
    tags:
      - { name: event_subscriber }

  language.field.cdf.exclude:
    class: Drupal\acquia_contenthub\EventSubscriber\ExcludeContentField\RemoveLanguageField
    tags:
      - { name: event_subscriber }

  path.field.cdf.exclude:
    class: Drupal\acquia_contenthub\EventSubscriber\ExcludeContentField\RemovePathAliasField
    tags:
      - { name: event_subscriber }

  term.parent.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\TermParentSerializer
    arguments: ['@database']
    tags:
      - { name: event_subscriber }

  entity_reference.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\EntityReferenceFieldSerializer
    tags:
      - { name: event_subscriber }

  entity_reference_image.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\EntityReferenceImageFieldSerializer
    tags:
      - { name: event_subscriber }

  menu_link.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\LinkFieldSerializer
    tags:
    - { name: event_subscriber }

  text_item.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\TextItemFieldSerializer
    arguments: ['@entity_type.manager']
    tags:
      - { name: event_subscriber }

  language.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\LanguageFieldSerializer
    tags:
      - { name: event_subscriber }

  general.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\GeneralFieldSerializer
    tags:
      - { name: event_subscriber }

  password.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\PasswordFieldSerializer
    tags:
      - { name: event_subscriber }

  path.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\PathFieldSerializer
    arguments: ['@entity_type.manager']
    tags:
      - { name: event_subscriber }

  layout_builder.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\LayoutBuilderFieldSerializer
    arguments: ['@entity_type.manager']
    tags:
    - { name: event_subscriber }

  fallback.field.cdf.serializer:
    class: Drupal\acquia_contenthub\EventSubscriber\SerializeContentField\FallbackFieldSerializer
    tags:
      - { name: event_subscriber }

  language.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\EntityLanguage
    tags:
      - { name: event_subscriber }

  text_item.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\TextItemField
    tags:
      - { name: event_subscriber }

  entity_reference.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\EntityReferenceField
    arguments: ['@acquia_contenthub.logger_channel']
    tags:
      - { name: event_subscriber }

  entity_reference_image.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\EntityReferenceImageField
    tags:
      - { name: event_subscriber }

  menu_link.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\LinkFieldUnserializer
    tags:
      - { name: event_subscriber }

  default.cleanup_stubs:
    class: Drupal\acquia_contenthub\EventSubscriber\CleanupStubs\DefaultStubCleanup
    tags:
      - { name: event_subscriber }

  content_moderation.cleanup_stubs:
    class: Drupal\acquia_contenthub\EventSubscriber\CleanupStubs\ContentModerationStateStubCleanup
    tags:
      - { name: event_subscriber }

  layout_builder.cleanup_stubs:
    class: Drupal\acquia_contenthub\EventSubscriber\CleanupStubs\LayoutBuilderInlineBlockStubCleanup
    arguments: ['@database', '@entity_type.manager']
    tags:
      - { name: event_subscriber }

  layout_builder.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\LayoutBuilderFieldUnserializer
    arguments: ['@entity_type.manager']
    tags:
      - { name: event_subscriber }

  path_alias.path.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\PathAliasPathFieldUnserializer
    tags:
      - { name: event_subscriber }

  fallback.field.cdf.unserializer:
    class: Drupal\acquia_contenthub\EventSubscriber\UnserializeContentField\FallbackFieldUnserializer
    tags:
      - { name: event_subscriber }

  anonymous_user.data.tamper:
    class: Drupal\acquia_contenthub\EventSubscriber\EntityDataTamper\AnonymousUser
    tags:
      - { name: event_subscriber }

  content_lanaguage_settings.entity.import:
    class: Drupal\acquia_contenthub\EventSubscriber\EntityImport\ContentLanguageSettings
    tags:
      - { name: event_subscriber }

  filter_format.entity.import:
    class: Drupal\acquia_contenthub\EventSubscriber\EntityImport\FilterFormatEditor
    tags:
      - { name: event_subscriber }

  acquia_contenthub.settings.envvar:
    class: Drupal\acquia_contenthub\EventSubscriber\GetSettings\GetSettingsFromEnvVar
    arguments: ['@acquia_contenthub.logger_channel', '@messenger']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.settings.core:
    class: Drupal\acquia_contenthub\EventSubscriber\GetSettings\GetSettingsFromCoreSettings
    tags:
      - { name: event_subscriber }

  acquia_contenthub.settings.config:
    class: Drupal\acquia_contenthub\EventSubscriber\GetSettings\GetSettingsFromCoreConfig
    arguments: ['@config.factory']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.clientcdf.language:
    class: Drupal\acquia_contenthub\EventSubscriber\ClientCdf\ClientCdfLanguage
    arguments: ['@entity_type.manager', '@module_handler', '@language.default']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.handle_webhook.register:
    class: Drupal\acquia_contenthub\EventSubscriber\HandleWebhook\RegisterWebhook
    arguments: ['@logger.factory']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.unregister.orphaned_filters:
    class: Drupal\acquia_contenthub\EventSubscriber\Unregister\OrphanedFilterHandler
    arguments: [ '@acquia_contenthub.client.factory' ]
    tags:
      - { name: event_subscriber }

  acquia_contenthub.unregister.orphaned_entities:
    class: Drupal\acquia_contenthub\EventSubscriber\Unregister\OrphanedEntitiesHandler
    arguments: [ '@acquia_contenthub.client.factory' ]
    tags:
      - { name: event_subscriber }

  acquia_contenthub.handle_webhook.report:
    class: Drupal\acquia_contenthub\EventSubscriber\HandleWebhook\Report
    arguments: ['@acquia_contenthub_common_actions', '@extension.list.module']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.handle_webhook.regenerate_shared_secret:
    class: Drupal\acquia_contenthub\EventSubscriber\HandleWebhook\RegenerateSharedSecret
    arguments: [ '@acquia_contenthub.config' , '@acquia_contenthub.logger_channel']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.getcdftype.defaultcdf:
    class: Acquia\ContentHubClient\EventSubscriber\DefaultCDF
    tags:
      - { name: event_subscriber }

  acquia_contenthub.getcdftype.clientcdf:
    class: Acquia\ContentHubClient\EventSubscriber\ClientCDF
    tags:
      - { name: event_subscriber }

  acquia_contenthub.filter_deps.remove_non_pub_files_deps:
    class: Drupal\acquia_contenthub\EventSubscriber\FilterFields\RemoveNonPublicFilesDependencies
    arguments: ['@acquia_contenthub.file_scheme_handler.manager']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.filter_deps.remove_non_pub_files:
    class: Drupal\acquia_contenthub\EventSubscriber\ExcludeContentField\RemoveNonPublicFiles
    arguments: [ '@acquia_contenthub.file_scheme_handler.manager' ]
    tags:
      - { name: event_subscriber }

  acquia_contenthub.import_failure.create_stubs:
    class: Drupal\acquia_contenthub\EventSubscriber\ImportFailure\CreateStubs
    tags:
      - { name: event_subscriber }

  acquia_contenthub.import_failure.process_high_priority_entities:
    class: Drupal\acquia_contenthub\EventSubscriber\ImportFailure\ProcessHighPriorityEntities
    tags:
    - { name: event_subscriber }

  acquia_contenthub.import_failure.default_exception:
    class: Drupal\acquia_contenthub\EventSubscriber\ImportFailure\DefaultException
    tags:
      - { name: event_subscriber }

  acquia_contenthub.logger_channel:
    class: Drupal\Core\Logger\LoggerChannel
    factory: logger.factory:get
    arguments: ['acquia_contenthub']

  acquia_contenthub.config:
    class: Drupal\Core\Config\Config
    factory: config.factory:getEditable
    arguments: ['acquia_contenthub.admin_settings']

  acquia_contenthub.connection_manager:
    class: Drupal\acquia_contenthub\ContentHubConnectionManager
    arguments: ['@config.factory', '@acquia_contenthub.client.factory', '@acquia_contenthub.logger_channel', '@module_handler']

  acquia_contenthub.focal_point.collector:
    class: Drupal\acquia_contenthub\EventSubscriber\DependencyCollector\FocalPointCollector
    arguments: ['@database', '@module_handler']
    tags:
      - { name: event_subscriber }

  acquia_contenthub.webform_submission_entity.cdf.handler:
    class: Drupal\acquia_contenthub\EventSubscriber\Cdf\WebformSubmissionHandler
    tags:
      - { name: event_subscriber }

  acquia_contenthub.entity.redirect.calculator:
    class: Drupal\acquia_contenthub\EventSubscriber\DependencyCollector\EntityRedirectCollector
    arguments: [ '@module_handler' ]
    tags:
      - { name: event_subscriber }

  acquia_contenthub.audit_track_entities:
    class: Drupal\acquia_contenthub\AuditTrackEntities
    arguments: []

  acquia_contenthub.project_version_client:
    class: Drupal\acquia_contenthub\Client\ProjectVersionClient
    arguments: ['@http_client', '@acquia_contenthub.logger_channel']

  acquia_contenthub.event_logger:
    class: Drupal\acquia_contenthub\Libs\Logging\ContentHubEventLogger
    arguments: [ '@acquia_contenthub.client.factory', '@acquia_contenthub.logger_channel', '@uuid' ]

  acquia_contenthub.valid_ssl.client_cdf.attribute:
    class: Drupal\acquia_contenthub\EventSubscriber\CdfAttributes\ValidSslAttribute
    arguments: [ '@request_stack', '@acquia_contenthub.ssl_factory' ]
    tags:
      - { name: event_subscriber }

  acquia_contenthub.ssl_factory:
    class: Drupal\acquia_contenthub\SslCertificateFactory

  acquia_contenthub.cdf_metrics_manager:
    class: Drupal\acquia_contenthub\Client\CdfMetricsManager
    arguments: ['@acquia_contenthub.client.factory', '@acquia_contenthub.config', '@acquia_contenthub.logger_channel', '@event_dispatcher' ]

  acquia_contenthub.depcalc_cache_operator:
    class: Drupal\acquia_contenthub\Libs\Depcalc\DepcalcCacheOperator
    arguments: ['@database']

  acquia_contenthub.drupal_bridge:
    class: Drupal\acquia_contenthub\Libs\Common\DrupalVersionCompatibilityBridge

  acquia_contenthub.platform_checker:
    class: Drupal\acquia_contenthub\Libs\Common\PlatformCompatibilityChecker
    arguments: [ '@messenger', '@acquia_contenthub.logger_channel' ]
